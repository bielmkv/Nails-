<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nails By Suzan Santos</title>
    <link rel="icon" type="image/jpg" href="img/favicon.ico">

    <!-- Fontes -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700;900&display=swap" rel="stylesheet">

    <!-- CSS externo -->
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <header class="logo-header">
        <h1 class="logo-nails">Nails</h1>
        <p class="logo-by">BY SUZAN SANTOS</p>
        <p>Agende seu hor√°rio e veja nosso portf√≥lio!</p>
    </header>

    <nav>
        <a href="portifolio.html">PORT√çFOLIO</a>
        <a href="#agendamento">AGENDAR HOR√ÅRIO</a>
        <a href="https://wa.me/5513997305044?text= agendamento">CONTATO: (13) 99730-5044</a>
    </nav>

    <!-- üî•üî• NOVA PARTE ADICIONADA AQUI (3 COLUNAS) -->
    <section class="info-section">
        <div class="info-box">
            <h3>SOBRE MIM</h3>
            <div class="divider"></div>
            <p>Ol√°, amigas! Me chamo Suzan, sou Nail Designer apaixonada por cuidar das suas unhas com delicadeza e qualidade. Meu objetivo √© oferecer um atendimento acolhedor e resultados duradouros.
Ser√° um prazer cuidar¬†de¬†voc√™!¬†‚ú®</p>
        </div>

        <div class="info-box">
            <h3>POL√çTICAS</h3>
            <div class="divider"></div>
            <p>‚Ä¢ Toler√¢ncia m√°xima de 10 minutos de atraso.<br>
‚Ä¢ Cancelamento ou reagendamento com no m√≠nimo 12h de anteced√™ncia.<br>
‚Ä¢ Hor√°rios s√£o reservados exclusivamente para¬†cada¬†cliente.</p>
        </div>

        
    </section>
    <!-- üî•üî• FIM DA NOVA PARTE -->

    <section id="agendamento">
        <div class="button-group">
            <button id="btnSessao">Agendar Aplica√ß√£o</button>
            <button id="btnManutencao">Agendar Manuten√ß√£o</button>
        </div>

        <!-- Formul√°rio para Agendar Sess√£o -->
        <div id="formSessao" class="form-container active">
            <h3>Agendar Aplica√ß√£o</h3>
            <form id="appointmentForm">
                <label for="name">Nome:</label>
                <input type="text" name="name" id="name" required>

                <label for="phone">Telefone:</label>
                <input type="tel" name="phone" id="phone" required>

                <label for="date">Data:</label>
                <select name="date" id="date" required>
                    <option value="">Selecione</option>
                    <!-- Datas ser√£o geradas dinamicamente pelo JS -->
                </select>

                <label for="time">Hor√°rio:</label>
                <select name="time" id="time" required>
                    <option value="">Selecione</option>
                    <!-- Hor√°rios ser√£o gerados dinamicamente pelo JS -->
                </select>

                <label for="service">Servi√ßo:</label>
                <select name="service" id="service" required>
                    <option value="">Selecione</option>
                    <option value="Banho De Gel">Banho De Gel</option>
                    <option value="Gel Na Tips">Gel Na Tips</option>
                </select>

                <button type="submit">Agendar Aplica√ß√£o</button>
            </form>
        </div>

        <!-- Formul√°rio para Agendar Manuten√ß√£o -->
        <div id="formManutencao" class="form-container">
            <h3>Agendar Manuten√ß√£o</h3>
            <form id="maintenanceForm">
                <label for="nameM">Nome:</label>
                <input type="text" name="nameM" id="nameM" required>

                <label for="phoneM">Telefone:</label>
                <input type="tel" name="phoneM" id="phoneM" required>

                <label for="lastDate">Data da √öltima Aplica√ß√£o:</label>
                <input type="date" name="lastDate" id="lastDate" required>

                <label for="dateM">Data Desejada:</label>
                <select name="dateM" id="dateM" required>
                    <option value="">Selecione</option>
                    <!-- Datas ser√£o geradas dinamicamente pelo JS -->
                </select>

                <label for="timeM">Hor√°rio:</label>
                <select name="timeM" id="timeM" required>
                    <option value="">Selecione</option>
                    <!-- Hor√°rios ser√£o gerados dinamicamente pelo JS -->
                </select>

                <label for="maintenanceType">Tipo de Manuten√ß√£o:</label>
                <select name="maintenanceType" id="maintenanceType" required>
                    <option value="">Selecione</option>
                    <option value="Banho De Gel">Banho De Gel</option>
                    <option value="Gel Na Tips">Gel Na Tips</option>
                </select>
                <button type="submit">Agendar Manuten√ß√£o</button>
            </form>
        </div>

        <p id="status"></p>
    </section>

    <footer id="contato">
        <p>&copy;  2025 Nails By Suzan Santos </p>
    </footer>

    <!-- JS -->
    <script>
        // Fun√ß√£o para obter reservas do localStorage
        function getReservas() {
            return JSON.parse(localStorage.getItem('reservas')) || [];
        }

        // Fun√ß√£o para salvar reservas no localStorage
        function saveReservas(reservas) {
            localStorage.setItem('reservas', JSON.stringify(reservas));
        }

        // Fun√ß√£o para obter hor√°rios dispon√≠veis por dia da semana (configur√°veis pelo dono)
        function getAvailableTimes(date) {
            const availableTimesPerDay = JSON.parse(localStorage.getItem('availableTimesPerDay')) || {
                'monday': ['06:00','18:00'],
                'tuesday': ['06:00','18:00'],
                'wednesday': ['06:00','18:00'],
                'thursday': ['06:00','18:00'],
                'friday': ['06:00','18:00'],
                'saturday': ['17:00', '19:00']
            };
            const days = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];
            const dayOfWeek = days[new Date(date).getDay()];
            return availableTimesPerDay[dayOfWeek] || [];
        }

        // Fun√ß√£o para gerar datas dos pr√≥ximos 90 dias (aprox. 3 meses)
        function generateDates() {
            const dates = [];
            const today = new Date();
            for (let i = 0; i < 30; i++) {
                const date = new Date(today);
                date.setDate(today.getDate() + i);
                const value = date.toISOString().split('T')[0]; // YYYY-MM-DD
                const text = date.toLocaleDateString('pt-BR'); // DD/MM/YYYY
                dates.push({ value, text });
            }
            return dates;
        }

        // Fun√ß√£o para atualizar op√ß√µes de hor√°rio com base na data selecionada
        function updateTimeOptions(dateSelect, timeSelect) {
            const selectedDate = dateSelect.value;
            const reservas = getReservas();
            const availableTimes = getAvailableTimes(selectedDate);
            const reservedTimes = reservas.filter(r => r.date === selectedDate).map(r => r.time);

            // Resetar op√ß√µes
            timeSelect.innerHTML = '<option value="">Selecione</option>';
            availableTimes.forEach(time => {
                if (!reservedTimes.includes(time)) {
                    const option = document.createElement('option');
                    option.value = time;
                    option.textContent = time;
                    timeSelect.appendChild(option);
                }
            });
        }

        // Fun√ß√£o para atualizar op√ß√µes de datas removendo aquelas sem hor√°rios dispon√≠veis
        function updateDateOptions(dateSelect, timeSelect) {
            const reservas = getReservas();
            const dates = generateDates();

            dateSelect.innerHTML = '<option value="">Selecione</option>';
            dates.forEach(date => {
                const availableTimesForDate = getAvailableTimes(date.value);
                const reservedTimesForDate = reservas.filter(r => r.date === date.value).map(r => r.time);
                const availableTimesLeft = availableTimesForDate.filter(time => !reservedTimesForDate.includes(time));
                if (availableTimesLeft.length > 0) {
                    const option = document.createElement('option');
                    option.value = date.value;
                    option.textContent = date.text;
                    dateSelect.appendChild(option);
                }
            });

            // Se uma data estiver selecionada, atualizar hor√°rios
            if (dateSelect.value) {
                updateTimeOptions(dateSelect, timeSelect);
            }
        }

        // Adicionar event listeners para mudan√ßa de data
        document.getElementById('date').addEventListener('change', function() {
            updateTimeOptions(this, document.getElementById('time'));
        });

        document.getElementById('dateM').addEventListener('change', function() {
            updateTimeOptions(this, document.getElementById('timeM'));
        });

        // Inicializar op√ß√µes de datas e hor√°rios ao carregar a p√°gina
        updateDateOptions(document.getElementById('date'), document.getElementById('time'));
        updateDateOptions(document.getElementById('dateM'), document.getElementById('timeM'));

        document.getElementById("btnSessao").addEventListener("click", function() {
            document.getElementById("formSessao").classList.add("active");
            document.getElementById("formManutencao").classList.remove("active");
        });

        document.getElementById("btnManutencao").addEventListener("click", function() {
            document.getElementById("formManutencao").classList.add("active");
            document.getElementById("formSessao").classList.remove("active");
        });

        document.getElementById("appointmentForm").addEventListener("submit", function(event) {
            event.preventDefault();

            const name = document.getElementById("name").value;
            const phone = document.getElementById("phone").value;
            const date = document.getElementById("date").value;
            const time = document.getElementById("time").value;
            const service = document.getElementById("service").value;

            const reservas = getReservas();

            // Verificar se o hor√°rio e data est√£o dispon√≠veis
            const isReserved = reservas.some(r => r.date === date && r.time === time);
            if (isReserved) {
                alert('Este hor√°rio e data j√° est√£o reservados. Por favor, escolha outro.');
                return;
            }

            // Adicionar reserva
            reservas.push({ date, time, phone, name, type: 'aplicacao' });
            saveReservas(reservas);

            const phoneNumber = "5513997305044";

            let message = 
`Ol√°! Gostaria de agendar uma sess√£o. Seguem os dados:

*Nome:* ${name}
*Telefone:* ${phone}
*Data:* ${date}
*Hor√°rio:* ${time}
*Servi√ßo:* ${service}

Enviado pelo formul√°rio do site.`;

            const encodedMessage = encodeURIComponent(message);
            window.open(`https://wa.me/${phoneNumber}?text=${encodedMessage}`, "_blank");

            // Atualizar op√ß√µes ap√≥s reserva
            updateDateOptions(document.getElementById('date'), document.getElementById('time'));
            updateDateOptions(document.getElementById('dateM'), document.getElementById('timeM'));
        });

        document.getElementById("maintenanceForm").addEventListener("submit", function(event) {
            event.preventDefault();

            const nameM = document.getElementById("nameM").value;
            const phoneM = document.getElementById("phoneM").value;
            const lastDate = document.getElementById("lastDate").value;
            const dateM = document.getElementById("dateM").value;
            const timeM = document.getElementById("timeM").value;
            const maintenanceType = document.getElementById("maintenanceType").value;

            const reservas = getReservas();

            // Verificar se o hor√°rio e data est√£o dispon√≠veis
            const isReserved = reservas.some(r => r.date === dateM && r.time === timeM);
            if (isReserved) {
                alert('Este hor√°rio e data j√° est√£o reservados. Por favor, escolha outro.');
                return;
            }

            // Adicionar reserva
            reservas.push({ date: dateM, time: timeM, phone: phoneM, name: nameM, type: 'manutencao' });
            saveReservas(reservas);

            const phoneNumber = "5513997305044";

            let message = 
`Ol√°! Gostaria de agendar uma manuten√ß√£o. Seguem os dados:

*Nome:* ${nameM}
*Telefone:* ${phoneM}
*Data da √öltima Sess√£o:* ${lastDate}
*Data Desejada:* ${dateM}
*Hor√°rio:* ${timeM}
*Tipo de Manuten√ß√£o:* ${maintenanceType}

Enviado pelo formul√°rio do site.`;

            const encodedMessage = encodeURIComponent(message);
            window.open(`https://wa.me/${phoneNumber}?text=${encodedMessage}`, "_blank");

            // Atualizar op√ß√µes ap√≥s reserva
            updateDateOptions(document.getElementById('date'), document.getElementById('time'));
            updateDateOptions(document.getElementById('dateM'), document.getElementById('timeM'));
        });
    </script>

</body>
</html>
